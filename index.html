<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Отчет по работе групп</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Основные стили */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5;
            color: #333;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
        }

        /* Стили для фильтров */
        .filters-container {
            padding: 15px;
            margin-bottom: 20px;
            background-color: #fff;
            border-bottom: 1px solid #e0e0e0;
        }

        .filter-row {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .filter-item {
            display: flex;
            align-items: center;
            margin-right: 30px;
            margin-bottom: 10px;
        }

        .filter-label {
            margin-right: 10px;
            font-weight: 500;
            min-width: 80px;
        }

        .date-input {
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-right: 5px;
        }

        .warning-icon {
            color: #e67e22;
            background-color: #fef9e7;
            padding: 3px 10px;
            border-radius: 50%;
            font-size: 1.5em;
            margin-left: 10px;
            font-weight: bold;
            cursor: help;
            position: relative;
            display: inline-block;
        }

        .warning-icon:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .tooltip-text {
            visibility: hidden;
            width: 300px;
            background-color: #fff;
            color: #333;
            text-align: left;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1000;
            top: 100%;
            left: -140px;
            margin-top: 10px;
            opacity: 0;
            transition: opacity 0.3s;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            border: 1px solid #e0e0e0;
            font-size: 0.9em;
            font-weight: normal;
        }

        .tooltip-text::after {
            content: "";
            position: absolute;
            bottom: 100%;
            left: 150px;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: transparent transparent #fff transparent;
        }

        /* Стили для выпадающих списков */
        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-button {
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-width: 180px;
            font-size: 14px;
        }

        .dropdown-button:hover {
            background-color: #e0e0e0;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #fff;
            min-width: 200px;
            box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            border-radius: 4px;
            margin-top: 5px;
            left: 0;
            border: 1px solid #ccc;
            max-height: 300px;
            overflow-y: auto;
        }

        .dropdown.active .dropdown-content {
            display: block;
        }

        .dropdown-item {
            padding: 8px 15px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
        }

        .dropdown-item:hover {
            background-color: #f1f1f1;
        }

        .dropdown-item input[type="checkbox"] {
            margin-right: 10px;
        }

        .arrow-icon {
            width: 16px;
            height: 16px;
            margin-left: 10px;
        }

        /* Стили для обычных селектов */
        select {
            padding: 8px 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #f0f0f0;
            min-width: 180px;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            cursor: pointer;
        }

        select:hover {
            background-color: #e0e0e0;
        }

        /* Стили для кнопок */
        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
        }

        .btn-primary {
            background-color: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background-color: #0069d9;
        }

        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #5a6268;
        }

        /* Стили для вкладок */
        .tabs {
            display: flex;
            border-bottom: 1px solid #dee2e6;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab-button {
            padding: 10px 15px;
            background-color: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 500;
            color: #495057;
            white-space: nowrap;
        }

        .tab-button:hover {
            color: #007bff;
        }

        .tab-button.active {
            color: #007bff;
            border-bottom-color: #007bff;
        }

        .tab-content {
            display: none;
            padding: 15px 0;
        }

        .tab-content.active {
            display: block;
        }

        /* Стили для таблиц */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th,
        td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background-color: #f2f2f2;
            font-weight: 600;
            color: #555;
            text-transform: uppercase;
            font-size: 0.9em;
        }

        tr:hover {
            background-color: #f5f5f5;
        }

        /* Стили для бейджей */
        .badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.85em;
        }

        .badge-success {
            background-color: #d4edda;
            color: #155724;
        }

        .badge-danger {
            background-color: #f8d7da;
            color: #721c24;
        }

        .badge-warning {
            background-color: #fff3cd;
            color: #856404;
        }

        .badge-info {
            background-color: #d1ecf1;
            color: #0c5460;
        }

        /* Стили для процентов */
        .percentage-high {
            color: #dc3545;
            font-weight: 600;
        }

        .percentage-medium {
            color: #ffc107;
            font-weight: 600;
        }

        .percentage-low {
            color: #28a745;
            font-weight: 600;
        }

        /* Стили для карточек статистики */
        .stat-cards {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-card {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 15px;
            flex: 1;
            min-width: 250px;
        }

        .stat-card .title {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
        }

        .stat-card .value {
            font-size: 1.8em;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .stat-card .details {
            margin-top: 15px;
            border-top: 1px solid #eee;
            padding-top: 10px;
        }

        .stat-card .detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9em;
        }

        .mtm-badge {
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.7em;
            font-weight: 600;
        }

        .mtm-positive {
            background-color: #d4edda;
            color: #155724;
        }

        .mtm-negative {
            background-color: #f8d7da;
            color: #721c24;
        }

        .ml-2 {
            margin-left: 0.5rem;
        }

        /* Дополнительные стили */
        .overflow-x-auto {
            overflow-x: auto;
        }

        .mt-6 {
            margin-top: 1.5rem;
        }

        .p-4 {
            padding: 1rem;
        }

        .text-center {
            text-align: center;
        }

        .text-xl {
            font-size: 1.25rem;
            line-height: 1.75rem;
        }

        .font-semibold {
            font-weight: 600;
        }

        .mb-4 {
            margin-bottom: 1rem;
        }

        .flex {
            display: flex;
        }

        .items-center {
            align-items: center;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="filters-container">
            <div class="filter-row">
                <div class="filter-item">
                    <span class="filter-label">Период с:</span>
                    <input type="date" id="startDate" value="2025-07-01" class="date-input">
                    <span>по:</span>
                    <input type="date" id="endDate" value="2025-07-31" class="date-input">
                    <span class="warning-icon">!
                        <span class="tooltip-text">Ограничения периода выборки:<br>
                            • Месяц - максимум 1 месяц<br>
                            • Неделя - максимум 1 неделя<br>
                            • День - максимум 1 день
                        </span>
                    </span>
                </div>
            </div>

            <div class="filter-row">
                <div class="filter-item">
                    <span class="filter-label">Режим отображения:</span>
                    <select id="timeGranularity" onchange="loadTabData(currentTab)">
                        <option value="День">День</option>
                        <option value="Неделя">Неделя</option>
                        <option value="Месяц" selected>Месяц</option>
                    </select>
                </div>

                <div class="filter-item">
                    <span class="filter-label">Дашборд:</span>
                    <select id="dashboard">
                        <option value="Автооценка" selected>Автооценка</option>
                        <option value="Аттестация УА">Аттестация УА</option>
                        <option value="Аттестация Пре-хард">Аттестация Пре-хард</option>
                    </select>
                </div>
            </div>

            <div class="filter-row">
                <div class="filter-item">
                    <span class="filter-label">Контакт-центр:</span>
                    <select id="callCenter" onchange="loadTabData(currentTab)">
                        <option value="Все КЦ">Все КЦ</option>
                        <option value="КЦ1">КЦ1</option>
                        <option value="КЦ2">КЦ2</option>
                    </select>
                </div>

                <div class="filter-item">
                    <span class="filter-label">Подразделения:</span>
                    <div class="dropdown" id="departmentsDropdown">
                        <button class="dropdown-button" onclick="toggleDropdown('departmentsDropdown')">
                            <span id="selectedDepartments">Все подразделения</span>
                            <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="dropdown-content">
                            <label class="dropdown-item">
                                <input type="checkbox" value="Все подразделения" checked
                                    onchange="handleDepartmentSelection(this)">
                                Все подразделения
                            </label>
                            <label class="dropdown-item">
                                <input type="checkbox" value="Гридчина - группа"
                                    onchange="handleDepartmentSelection(this)">
                                Гридчина - группа
                            </label>
                            <label class="dropdown-item">
                                <input type="checkbox" value="Сычева - группа"
                                    onchange="handleDepartmentSelection(this)">
                                Сычева - группа
                            </label>
                            <label class="dropdown-item">
                                <input type="checkbox" value="Мельникова - группа"
                                    onchange="handleDepartmentSelection(this)">
                                Мельникова - группа
                            </label>
                            <label class="dropdown-item">
                                <input type="checkbox" value="Коровина - группа"
                                    onchange="handleDepartmentSelection(this)">
                                Коровина - группа
                            </label>
                        </div>
                    </div>
                </div>

                <div class="filter-item">
                    <span class="filter-label">Сотрудники:</span>
                    <div class="dropdown" id="employeesDropdown">
                        <button class="dropdown-button" onclick="toggleDropdown('employeesDropdown')">
                            <span id="selectedEmployees">Все сотрудники</span>
                            <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="dropdown-content">
                            <label class="dropdown-item">
                                <input type="checkbox" value="Все сотрудники" checked
                                    onchange="handleEmployeeSelection(this)">
                                Все сотрудники
                            </label>
                            <label class="dropdown-item">
                                <input type="checkbox" value="Иванов И.И." onchange="handleEmployeeSelection(this)">
                                Иванов И.И.
                            </label>
                            <label class="dropdown-item">
                                <input type="checkbox" value="Петров П.П." onchange="handleEmployeeSelection(this)">
                                Петров П.П.
                            </label>
                            <label class="dropdown-item">
                                <input type="checkbox" value="Сидоров С.С." onchange="handleEmployeeSelection(this)">
                                Сидоров С.С.
                            </label>
                            <label class="dropdown-item">
                                <input type="checkbox" value="Смирнова А.А." onchange="handleEmployeeSelection(this)">
                                Смирнова А.А.
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="filter-row">
                <div class="filter-item">
                    <button id="updateButton" class="btn btn-primary">Обновить</button>
                </div>
                <div class="filter-item">
                    <select id="export">
                        <option value="" disabled selected>Экспорт</option>
                        <option value="pdf">Экспорт в PDF</option>
                        <option value="excel">Экспорт в Excel</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab-button active" data-tab="company">Компания</button>
            <button class="tab-button" data-tab="departments">Подразделения</button>
            <button class="tab-button" data-tab="employees">Команда</button>
            <button class="tab-button" data-tab="summary">Свод</button>
            <button class="tab-button" data-tab="deviationsKpi">Отклонения по КЦ</button>
            <button class="tab-button" data-tab="deviationsOperators">Отклонения по операторам</button>
            <button class="tab-button" data-tab="manualEvaluation">Ручная оценка</button>
            <button class="tab-button" data-tab="chartData">Графики</button>
        </div>

        <!-- Company Tab Content -->
        <div id="companyTab" class="tab-content active">
            <!-- Карточки статистики -->
            <div class="stat-cards">
                <div class="stat-card">
                    <div class="title">Количество звонков</div>
                    <div class="value">
                        <span id="totalCalls">55 000</span>
                        <span id="callsDynamics" class="mtm-badge mtm-positive ml-2">+2%</span>
                    </div>
                    <div class="details" id="callsDetails">
                        <div class="detail-item">
                            <span class="label">КЦ1:</span>
                            <div class="flex items-center">
                                <span class="value">33 000</span>
                                <span class="mtm-badge mtm-positive ml-2">+3%</span>
                            </div>
                        </div>
                        <div class="detail-item">
                            <span class="label">КЦ2:</span>
                            <div class="flex items-center">
                                <span class="value">22 000</span>
                                <span class="mtm-badge mtm-negative ml-2">-1%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="title">Отклонения</div>
                    <div class="value">
                        <span id="totalDeviations">3 900</span>
                        <span id="deviationsDynamics" class="mtm-badge mtm-positive ml-2">+3%</span>
                    </div>
                    <div class="details" id="deviationsDetails">
                        <div class="detail-item">
                            <span class="label">КЦ1:</span>
                            <div class="flex items-center">
                                <span class="value">2 400</span>
                                <span class="mtm-badge mtm-positive ml-2">+2%</span>
                            </div>
                        </div>
                        <div class="detail-item">
                            <span class="label">КЦ2:</span>
                            <div class="flex items-center">
                                <span class="value">1 500</span>
                                <span class="mtm-badge mtm-positive ml-2">+4%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="title">% отклонений</div>
                    <div class="value">
                        <span id="totalPercentage">7.0%</span>
                        <span id="percentageDynamics" class="mtm-badge mtm-positive ml-2">+1%</span>
                    </div>
                    <div class="details" id="percentageDetails">
                        <div class="detail-item">
                            <span class="label">КЦ1:</span>
                            <div class="flex items-center">
                                <span class="value">7.3%</span>
                                <span class="mtm-badge mtm-negative ml-2">-0.5%</span>
                            </div>
                        </div>
                        <div class="detail-item">
                            <span class="label">КЦ2:</span>
                            <div class="flex items-center">
                                <span class="value">6.8%</span>
                                <span class="mtm-badge mtm-positive ml-2">+0.3%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Таблица с данными сводной информации -->
            <div id="companySummaryTable" class="overflow-x-auto mt-6">
                <table>
                    <thead>
                        <tr>
                            <th>ПАРАМЕТР</th>
                            <th>ВСЕГО</th>
                            <th>RPC</th>
                            <th>НЕ RPC</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Оценено звонков</td>
                            <td>55 000 <span class="badge badge-success">+2%</span></td>
                            <td>15 000 <span class="badge badge-success">+2%</span></td>
                            <td>40 000 <span class="badge badge-success">+3%</span></td>
                        </tr>
                        <tr>
                            <td>Отклонений выявлено</td>
                            <td>3 900 <span class="badge badge-success">+3%</span></td>
                            <td>1 900 <span class="badge badge-danger">-1%</span></td>
                            <td>2 000 <span class="badge badge-success">+2%</span></td>
                        </tr>
                        <tr>
                            <td>% отклонений</td>
                            <td><span class="percentage-medium">7%</span> <span class="badge badge-success">+1%</span>
                            </td>
                            <td><span class="percentage-high">13%</span> <span class="badge badge-info">0%</span></td>
                            <td><span class="percentage-low">5%</span> <span class="badge badge-danger">-3%</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Departments Tab Content -->
        <div id="departmentsTab" class="tab-content">
            <div id="departmentsTable" class="overflow-x-auto mt-6"></div>
        </div>

        <!-- Employees Tab Content -->
        <div id="employeesTab" class="tab-content">
            <div id="employeesTable" class="overflow-x-auto mt-6"></div>
        </div>

        <!-- Summary Tab Content -->
        <div id="summaryTab" class="tab-content">
            <div class="p-4 text-center">
                <h2 class="text-xl font-semibold mb-4">Свод</h2>
                <p>Содержимое вкладки "Свод" будет доступно в следующей версии</p>
            </div>
        </div>

        <!-- Deviations KPI Tab Content -->
        <div id="deviationsKpiTab" class="tab-content">
            <div class="p-4 text-center">
                <h2 class="text-xl font-semibold mb-4">Отклонения по КЦ</h2>
                <p>Содержимое вкладки "Отклонения по КЦ" будет доступно в следующей версии</p>
            </div>
        </div>

        <!-- Deviations Operators Tab Content -->
        <div id="deviationsOperatorsTab" class="tab-content">
            <div class="p-4 text-center">
                <h2 class="text-xl font-semibold mb-4">Отклонения по операторам</h2>
                <p>Содержимое вкладки "Отклонения по операторам" будет доступно в следующей версии</p>
            </div>
        </div>

        <!-- Manual Evaluation Tab Content -->
        <div id="manualEvaluationTab" class="tab-content">
            <div class="p-4 text-center">
                <h2 class="text-xl font-semibold mb-4">Ручная оценка</h2>
                <p>Содержимое вкладки "Ручная оценка" будет доступно в следующей версии</p>
            </div>
        </div>

        <!-- Chart Data Tab Content -->
        <div id="chartDataTab" class="tab-content">
            <div class="p-4 text-center">
                <h2 class="text-xl font-semibold mb-4">Графики</h2>
                <p>Содержимое вкладки "Графики" будет доступно в следующей версии</p>
            </div>
        </div>
    </div>

    <!-- Подключение JavaScript файлов -->
    <script src="js/data-handler.js"></script>
    <script src="js/time-granularity.js"></script>
    <script src="js/dropdown-handler.js"></script>
    <script src="js/stat-cards.js"></script>
    <script src="js/pages/company.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Функция для переключения выпадающего списка
        function toggleDropdown(dropdownId) {
            // Закрываем все выпадающие списки
            document.querySelectorAll('.dropdown').forEach(dropdown => {
                if (dropdown.id !== dropdownId) {
                    dropdown.classList.remove('active');
                }
            });

            // Переключаем текущий выпадающий список
            const dropdown = document.getElementById(dropdownId);
            dropdown.classList.toggle('active');

            // Предотвращаем всплытие события
            event.stopPropagation();
        }

        // Обработчик выбора "Все подразделения"
        function handleDepartmentSelection(checkbox) {
            const checkboxes = document.querySelectorAll('#departmentsDropdown input[type="checkbox"]');

            if (checkbox.value === "Все подразделения") {
                // Если выбрано "Все подразделения", снимаем выбор с остальных
                checkboxes.forEach(cb => {
                    if (cb.value !== "Все подразделения") {
                        cb.checked = false;
                    }
                });
            } else {
                // Если выбрано конкретное подразделение, снимаем выбор с "Все подразделения"
                const allDepartmentsCheckbox = document.querySelector('#departmentsDropdown input[value="Все подразделения"]');
                allDepartmentsCheckbox.checked = false;

                // Проверяем, есть ли хотя бы один выбранный элемент
                const hasSelectedItems = Array.from(checkboxes).some(cb => cb.value !== "Все подразделения" && cb.checked);

                // Если нет выбранных элементов, выбираем "Все подразделения"
                if (!hasSelectedItems) {
                    allDepartmentsCheckbox.checked = true;
                }
            }

            updateDepartmentSelection();
        }

        // Обновление выбора подразделений
        function updateDepartmentSelection() {
            const checkboxes = document.querySelectorAll('#departmentsDropdown input[type="checkbox"]');
            const selectedDepartments = Array.from(checkboxes)
                .filter(cb => cb.checked)
                .map(cb => cb.value);

            const selectedText = document.getElementById('selectedDepartments');
            const allDepartmentsCheckbox = document.querySelector('#departmentsDropdown input[value="Все подразделения"]');

            if (selectedDepartments.length === 0) {
                // Если ничего не выбрано, выбираем "Все подразделения"
                allDepartmentsCheckbox.checked = true;
                selectedText.textContent = "Все подразделения";
            } else if (selectedDepartments.includes("Все подразделения")) {
                // Если выбрано "Все подразделения", снимаем выбор с остальных
                checkboxes.forEach(cb => {
                    if (cb.value !== "Все подразделения") {
                        cb.checked = false;
                    }
                });
                selectedText.textContent = "Все подразделения";
            } else if (selectedDepartments.length === 1) {
                selectedText.textContent = selectedDepartments[0];
            } else {
                selectedText.textContent = `Выбрано ${selectedDepartments.length}`;
            }
        }

        // Обработчик выбора "Все сотрудники"
        function handleEmployeeSelection(checkbox) {
            const checkboxes = document.querySelectorAll('#employeesDropdown input[type="checkbox"]');

            if (checkbox.value === "Все сотрудники") {
                // Если выбрано "Все сотрудники", снимаем выбор с остальных
                checkboxes.forEach(cb => {
                    if (cb.value !== "Все сотрудники") {
                        cb.checked = false;
                    }
                });
            } else {
                // Если выбран конкретный сотрудник, снимаем выбор с "Все сотрудники"
                const allEmployeesCheckbox = document.querySelector('#employeesDropdown input[value="Все сотрудники"]');
                allEmployeesCheckbox.checked = false;

                // Проверяем, есть ли хотя бы один выбранный элемент
                const hasSelectedItems = Array.from(checkboxes).some(cb => cb.value !== "Все сотрудники" && cb.checked);

                // Если нет выбранных элементов, выбираем "Все сотрудники"
                if (!hasSelectedItems) {
                    allEmployeesCheckbox.checked = true;
                }
            }

            updateEmployeeSelection();
        }

        // Обновление выбора сотрудников
        function updateEmployeeSelection() {
            const checkboxes = document.querySelectorAll('#employeesDropdown input[type="checkbox"]');
            const selectedEmployees = Array.from(checkboxes)
                .filter(cb => cb.checked)
                .map(cb => cb.value);

            const selectedText = document.getElementById('selectedEmployees');
            const allEmployeesCheckbox = document.querySelector('#employeesDropdown input[value="Все сотрудники"]');

            if (selectedEmployees.length === 0) {
                // Если ничего не выбрано, выбираем "Все сотрудники"
                allEmployeesCheckbox.checked = true;
                selectedText.textContent = "Все сотрудники";
            } else if (selectedEmployees.includes("Все сотрудники")) {
                // Если выбрано "Все сотрудники", снимаем выбор с остальных
                checkboxes.forEach(cb => {
                    if (cb.value !== "Все сотрудники") {
                        cb.checked = false;
                    }
                });
                selectedText.textContent = "Все сотрудники";
            } else if (selectedEmployees.length === 1) {
                selectedText.textContent = selectedEmployees[0];
            } else {
                selectedText.textContent = `Выбрано ${selectedEmployees.length}`;
            }
        }

        // Предотвращение закрытия выпадающего списка при клике на его содержимое
        document.querySelectorAll('.dropdown-content').forEach(content => {
            content.addEventListener('click', function (event) {
                // Предотвращаем всплытие события клика
                event.stopPropagation();
            });
        });

        // Закрытие выпадающих списков при клике вне них
        document.addEventListener('click', function () {
            document.querySelectorAll('.dropdown').forEach(dropdown => {
                dropdown.classList.remove('active');
            });
        });

        // Инициализация вкладок
        document.addEventListener('DOMContentLoaded', function () {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const tabId = this.getAttribute('data-tab');

                    // Убираем активный класс у всех кнопок и содержимого вкладок
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));

                    // Добавляем активный класс выбранной кнопке и содержимому
                    this.classList.add('active');
                    document.getElementById(tabId + 'Tab').classList.add('active');
                });
            });

            // Обработчик кнопки обновления
            document.getElementById('updateButton').addEventListener('click', function () {
                alert('Данные обновлены');
            });

            // Обработчик выбора экспорта
            document.getElementById('export').addEventListener('change', function () {
                const exportType = this.value;
                if (exportType) {
                    alert('Экспорт в ' + exportType.toUpperCase() + ' будет доступен в следующей версии');
                    this.selectedIndex = 0; // Сбрасываем выбор
                }
            });
        });
    </script>
</body>

</html>